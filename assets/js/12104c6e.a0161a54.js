"use strict";(globalThis.webpackChunk_prokodo_agency_cli_docs=globalThis.webpackChunk_prokodo_agency_cli_docs||[]).push([[713],{209(e,n,o){o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"commands/auth","title":"auth","description":"Manage your prokodo API key with the auth command \u2014 login, logout, and status sub-commands explained.","source":"@site/docs/commands/auth.mdx","sourceDirName":"commands","slug":"/commands/auth","permalink":"/docs/commands/auth","draft":false,"unlisted":false,"editUrl":"https://github.com/prokodo-agency/cli/edit/main/public/docs/docs/commands/auth.mdx","tags":[],"version":"current","lastUpdatedBy":"Christian Salat","lastUpdatedAt":1771684166000,"sidebarPosition":2,"frontMatter":{"id":"auth","title":"auth","sidebar_position":2,"description":"Manage your prokodo API key with the auth command \u2014 login, logout, and status sub-commands explained.","keywords":["prokodo auth","prokodo API key","prokodo auth login","prokodo auth logout","prokodo CLI authentication"]},"sidebar":"cliSidebar","previous":{"title":"Command Overview","permalink":"/docs/commands/overview"},"next":{"title":"init","permalink":"/docs/commands/init"}}');var i=o(6070),d=o(4134);const t={id:"auth",title:"auth",sidebar_position:2,description:"Manage your prokodo API key with the auth command \u2014 login, logout, and status sub-commands explained.",keywords:["prokodo auth","prokodo API key","prokodo auth login","prokodo auth logout","prokodo CLI authentication"]},r="prokodo auth",c={},l=[{value:"Sub-commands",id:"sub-commands",level:2},{value:"<code>auth login</code>",id:"auth-login",level:3},{value:"<code>auth logout</code>",id:"auth-logout",level:3},{value:"<code>auth whoami</code>",id:"auth-whoami",level:3},{value:"Credentials file location",id:"credentials-file-location",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"prokodo-auth",children:(0,i.jsx)(n.code,{children:"prokodo auth"})})}),"\n",(0,i.jsx)(n.p,{children:"Manage your prokodo API key credentials."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"prokodo auth <sub-command> [options]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"sub-commands",children:"Sub-commands"}),"\n",(0,i.jsx)(n.h3,{id:"auth-login",children:(0,i.jsx)(n.code,{children:"auth login"})}),"\n",(0,i.jsxs)(n.p,{children:["Store an API key in the credentials file at ",(0,i.jsx)(n.code,{children:"~/.config/prokodo/credentials.json"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth login --key <key>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Options"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Flag"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--key <key>"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"API key to store. Omit to enter interactively (TTY only)."})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Behaviour"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Validates the key shape (\u2265 8 characters, no ",(0,i.jsx)(n.code,{children:"<"})," or ",(0,i.jsx)(n.code,{children:">"})," placeholders)"]}),"\n",(0,i.jsx)(n.li,{children:"Performs a non-destructive health check against the API to confirm the key is accepted"}),"\n",(0,i.jsxs)(n.li,{children:["Writes ",(0,i.jsx)(n.code,{children:"~/.config/prokodo/credentials.json"})," with ",(0,i.jsx)(n.code,{children:"0600"})," permissions"]}),"\n",(0,i.jsx)(n.li,{children:"Prints the masked key hint on success"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth login --key pk_live_abc123xyz789\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# JSON mode \u2014 useful for scripted provisioning\nprokodo auth login --key pk_live_abc123xyz789 --json\n# \u2192 { "authenticated": true, "keyHint": "\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022xyz789" }\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Exit codes"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Code"}),(0,i.jsx)(n.th,{children:"Cause"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"0"})}),(0,i.jsx)(n.td,{children:"Key stored successfully"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"2"})}),(0,i.jsx)(n.td,{children:"No key provided in non-interactive mode"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"2"})}),(0,i.jsx)(n.td,{children:"Key fails shape validation"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1"})}),(0,i.jsx)(n.td,{children:"API rejected the key"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"stdin"})," is not a TTY (CI, Docker, pipe), the ",(0,i.jsx)(n.code,{children:"--key"})," flag is required.  The CLI will exit ",(0,i.jsx)(n.code,{children:"2"})," with an explanatory message if it is omitted."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"auth-logout",children:(0,i.jsx)(n.code,{children:"auth logout"})}),"\n",(0,i.jsx)(n.p,{children:"Remove the stored credentials file."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth logout\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Behaviour"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Deletes ",(0,i.jsx)(n.code,{children:"~/.config/prokodo/credentials.json"})," if it exists"]}),"\n",(0,i.jsxs)(n.li,{children:["Exits ",(0,i.jsx)(n.code,{children:"0"})," whether credentials existed or not (idempotent)"]}),"\n",(0,i.jsx)(n.li,{children:"Reports whether credentials were actually removed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth logout\n# Text: \u2713 Credentials removed.   OR   \u2139 No credentials were stored.\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'prokodo auth logout --json\n# \u2192 { "loggedOut": true }    OR    { "loggedOut": false }\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"auth-whoami",children:(0,i.jsx)(n.code,{children:"auth whoami"})}),"\n",(0,i.jsx)(n.p,{children:"Show the currently active API key (masked \u2014 last 4 characters visible) and its source."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth whoami\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Priority chain"})," (highest to lowest):"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--api-key"})," CLI flag"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PROKODO_API_KEY"})," environment variable"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"~/.config/prokodo/credentials.json"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If none are found, exits ",(0,i.jsx)(n.code,{children:"2"})," with instructions."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"prokodo auth whoami\n# API key: \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022xyz789\n# Source: credentials file\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'PROKODO_API_KEY=pk_live_test prokodo auth whoami --json\n# \u2192 { "keyHint": "\u2022\u2022\u2022\u2022test" }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"credentials-file-location",children:"Credentials file location"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Platform"}),(0,i.jsx)(n.th,{children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"macOS / Linux"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"~/.config/prokodo/credentials.json"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Windows"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"%APPDATA%\\prokodo\\credentials.json"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The file is created with ",(0,i.jsx)(n.code,{children:"0600"})," permissions on POSIX systems.  A warning is printed on startup if permissions are more permissive."]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},4134(e,n,o){o.d(n,{R:()=>t,x:()=>r});var s=o(758);const i={},d=s.createContext(i);function t(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);